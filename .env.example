# ==============================================================================
# YektaYar Platform - Unified Environment Configuration
# ==============================================================================
# This file contains all environment variables needed for the entire platform.
# Copy this file to .env and update the values according to your environment.
#
# Required variables are marked with (REQUIRED)
# Optional variables are marked with (OPTIONAL)
# ==============================================================================

# ==============================================================================
# Backend Server Configuration
# ==============================================================================

# Server port for the backend API (REQUIRED)
PORT=3000

# Server hostname/interface to bind to (REQUIRED)
HOST=localhost

# Node environment: development, production, test (REQUIRED)
NODE_ENV=development

# ==============================================================================
# Database Configuration
# ==============================================================================

# Full PostgreSQL connection URL (REQUIRED)
DATABASE_URL=postgresql://user:password@localhost:5432/yektayar

# Database connection details (REQUIRED)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=yektayar
DB_USER=yektayar_user
DB_PASSWORD=your_secure_password_here

# ==============================================================================
# Session & Security
# ==============================================================================

# Secret key for session management (REQUIRED)
# Generate with: openssl rand -base64 32
SESSION_SECRET=change_this_to_a_secure_random_string

# Secret key for JWT tokens (REQUIRED)
# Generate with: openssl rand -base64 32
JWT_SECRET=change_this_to_another_secure_random_string

# JWT token expiration time (REQUIRED)
JWT_EXPIRY=7d

# ==============================================================================
# API Keys (Optional - for future use)
# ==============================================================================

# AI service API key (OPTIONAL)
# AI_API_KEY=your_ai_api_key

# SMS gateway API key (OPTIONAL)
# SMS_GATEWAY_API_KEY=your_sms_gateway_key

# Email service API key (OPTIONAL)
# EMAIL_API_KEY=your_email_service_key

# ==============================================================================
# CORS Settings
# ==============================================================================

# Allowed CORS origins, comma-separated (REQUIRED)
CORS_ORIGIN=http://localhost:5173,http://localhost:8100

# Disable application-level CORS when behind a reverse proxy (OPTIONAL)
# Set to 'true' when using Apache/Nginx with CORS headers configured
# This prevents duplicate CORS headers that cause policy violations
# Default: false (CORS enabled in application)
DISABLE_CORS=false

# ==============================================================================
# WebSocket Configuration
# ==============================================================================

# Dedicated WebSocket server port for ws.yektayar.ir (REQUIRED)
# This port hosts both Socket.IO and native WebSocket protocols
# Configure your reverse proxy to route ws.yektayar.ir to this port
WEBSOCKET_PORT=3500

# WebSocket endpoint path (OPTIONAL)
# Default: /ws
# Override this in production when behind a reverse proxy
# Example: WEBSOCKET_PATH=/api/ws or WEBSOCKET_PATH=/websocket
WEBSOCKET_PATH=/ws

# ==============================================================================
# Rate Limiting
# ==============================================================================

# Rate limit time window in minutes (REQUIRED)
RATE_LIMIT_WINDOW=15

# Maximum requests per window (REQUIRED)
RATE_LIMIT_MAX_REQUESTS=100

# ==============================================================================
# API Documentation (Swagger) Protection
# ==============================================================================

# Username for accessing API documentation (REQUIRED for production)
SWAGGER_USERNAME=admin

# Password for accessing API documentation (REQUIRED for production)
# Generate a strong password for production use
SWAGGER_PASSWORD=change_this_secure_password

# ==============================================================================
# Frontend Configuration (Admin Panel & Mobile App)
# ==============================================================================

# Backend API base URL for frontend applications (REQUIRED)
# NOTE: Include the /api prefix in the URL
# 
# IMPORTANT: This URL should include the /api prefix if your backend routes are prefixed.
# The apiClient will automatically normalize paths, so both formats work:
#   - With trailing slash: http://localhost:3000/api/
#   - Without trailing slash: http://localhost:3000/api
# 
# Examples by environment:
#   - Local Development:  http://localhost:3000/api
#   - Staging:            https://staging-api.yektayar.ir/api
#   - Production:         https://api.yektayar.ir/api
# 
# How to view current value:
#   cat .env | grep API_BASE_URL
# 
# How to update:
#   1. Edit the .env file: nano .env (or your preferred editor)
#   2. Change the API_BASE_URL value
#   3. Restart the frontend applications (admin-panel and mobile-app)
# 
# Note: Endpoint paths in code should NOT include /api prefix.
# Example: apiClient.get('/users') will call http://localhost:3000/api/users
# 
API_BASE_URL=http://localhost:3000/api

# Environment name for frontend: development, production (REQUIRED)
VITE_ENVIRONMENT=development

# ==============================================================================
# Telegram Bot Configuration
# ==============================================================================

# Telegram bot token from @BotFather (REQUIRED for bot functionality)
# Get token from: https://t.me/BotFather
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Telegram admin chat ID for error logs and critical notices (REQUIRED)
# Get your chat ID from: https://t.me/userinfobot
TELEGRAM_ADMIN_CHAT_ID=your_admin_chat_id_here

# Telegram channel ID for broadcasting (OPTIONAL)
# TELEGRAM_CHANNEL_ID=your_channel_id_here

# Telegram bot webhook URL (OPTIONAL - leave empty for polling mode)
# TELEGRAM_WEBHOOK_URL=https://api.yektayar.ir/api/telegram/webhook
